from gigachat_integration import GigaChatIntegration

def handle_message(message):
    """
    –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.
    """
    message = message.lower()
    gigachat_helper = GigaChatIntegration()

    if "–∫–æ–Ω—Ç–∞–∫—Ç—ã" in message:
        KEYBOARD = [["üò∑–î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∞"],
                ["üë∂–û—Ç–¥–µ–ª–µ–Ω–∏–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ–π –ø–æ–º–æ—â–∏ –¥–µ—Ç—è–º"],
                ["üß™–ö–ª–∏–Ω–∏–∫–æ-–¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è"],
                ["‚óÄÔ∏è–ù–∞–∑–∞–¥"]]
        response = "–ß—Ç–æ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?"
        return response, KEYBOARD
    if "–¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∞" in message:
        KEYBOARD = [["‚óÄÔ∏è–ù–∞–∑–∞–¥"]]
        response = (
            "**–î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∞:**\n"
            "üìç–ê–¥—Ä–µ—Å: —É–ª. –ë–∞–±—É—à–∫–∏–Ω–∞, 44\n"
            "‚è±Ô∏è–ì—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã:\n"
            "    üî∏–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫-–ø—è—Ç–Ω–∏—Ü–∞, 08:00-20:00\n"
            "    üî∏–°—É–±–±–æ—Ç–∞: 08:30-18:00\n"
            "    üî∏–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ: 08:30-15:00\n"
            "üìû–¢–µ–ª–µ—Ñ–æ–Ω –µ–¥–∏–Ω–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–≤–æ–Ω–∫–æ–≤ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–π –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∏: "
            "8 (3022) 73\-70\-73 (–µ–¥–∏–Ω–∞—è —Å–ø—Ä–∞–≤–æ—á–Ω–∞—è)\n"
            "üì©–≠–ª. –ø–æ—á—Ç–∞: diagnost\_chita@mail.ru"
        )
        return response, KEYBOARD
    if "–æ—Ç–¥–µ–ª–µ–Ω–∏–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ–π –ø–æ–º–æ—â–∏ –¥–µ—Ç—è–º" in message:
        KEYBOARD = [["‚óÄÔ∏è–ù–∞–∑–∞–¥"]]
        response = (
            "**–û—Ç–¥–µ–ª–µ–Ω–∏–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ–π –ø–æ–º–æ—â–∏ –¥–µ—Ç—è–º**:\n"
            "üìç–ê–¥—Ä–µ—Å: —É–ª. –ë–∞–±—É—à–∫–∏–Ω–∞, 44 (–≤—Ö–æ–¥ —Å —É–ª. –ì–æ—Ä—å–∫–æ–≥–æ)\n"
            "‚è±Ô∏è–ì—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã:\n"
            "    üî∏–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫-–ø—è—Ç–Ω–∏—Ü–∞, 09:00-19:00\n"
            "    üî∏–°—É–±–±–æ—Ç–∞: 10:00-15:00\n"
            "    üî∏–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ: –≤—ã—Ö–æ–¥–Ω–æ–π\n"
            "üìû–¢–µ–ª–µ—Ñ–æ–Ω –µ–¥–∏–Ω–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–≤–æ–Ω–∫–æ–≤ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–π –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∏: "
            "8 (3022) 73\-70\-73 (–µ–¥–∏–Ω–∞—è —Å–ø—Ä–∞–≤–æ—á–Ω–∞—è)\n"
            "üì©–≠–ª. –ø–æ—á—Ç–∞: diagnost\_chita@mail.ru"
        )
        return response, KEYBOARD
    if "–∫–ª–∏–Ω–∏–∫–æ-–¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è" in message:
        KEYBOARD = [["üå°–ö–ª–∏–Ω–∏–∫o-–¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è"],
                    ["ü¶†–ë–∞–∫—Ç–µ—Ä–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è"],
                    ["‚óÄÔ∏è–ù–∞–∑–∞–¥"]]
        response = "–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ"
        return response, KEYBOARD

    if "–±–∞–∫—Ç–µ—Ä–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è" in message:
        KEYBOARD = [["‚óÄÔ∏è–ù–∞–∑–∞–¥"]]
        response = (
            "**–ë–∞–∫—Ç–µ—Ä–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è**:\n"
            "üìç–ê–¥—Ä–µ—Å: —É–ª. –ë–∞–±—É—à–∫–∏–Ω–∞, 46\n"
            "‚è±Ô∏è–ì—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã:\n"
            "    üî∏–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫-–ø—è—Ç–Ω–∏—Ü–∞, 09:00-12:00\n"
            "    üî∏–°—É–±–±–æ—Ç–∞, –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ: –≤—ã—Ö–æ–¥–Ω–æ–π \n"
            "üìû–¢–µ–ª–µ—Ñ–æ–Ω –µ–¥–∏–Ω–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–≤–æ–Ω–∫–æ–≤ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–π –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∏: "
            "8 (3022) 73\-70\-73 (–µ–¥–∏–Ω–∞—è —Å–ø—Ä–∞–≤–æ—á–Ω–∞—è)\n"
            "üì©–≠–ª. –ø–æ—á—Ç–∞: diagnost\_chita@mail.ru"
        )
        return response, KEYBOARD
    if "–∫–ª–∏–Ω–∏–∫o-–¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è" in message:
        KEYBOARD = [["‚óÄÔ∏è–ù–∞–∑–∞–¥"]]
        response = (
            "**–ö–ª–∏–Ω–∏–∫o-–¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è**:\n"
            "üìç–ê–¥—Ä–µ—Å: —É–ª. –ë–∞–±—É—à–∫–∏–Ω–∞, 44\n"
            "‚è±Ô∏è–ì—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã:\n"
            "    üî∏–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫-—á–µ—Ç–≤–µ—Ä–≥, 08:00-12:00, 12:30-15:00\n"
            "    üî∏–ü—è—Ç–Ω–∏—Ü–∞: 08:00-12:00, 12:30-14:00\n"
            "    üî∏–°—É–±–±–æ—Ç–∞, –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ: 09:00-12:00\n"
            "üìû–¢–µ–ª–µ—Ñ–æ–Ω –µ–¥–∏–Ω–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–≤–æ–Ω–∫–æ–≤ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–π –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∏: "
            "8 (3022) 73\-70\-73 (–µ–¥–∏–Ω–∞—è —Å–ø—Ä–∞–≤–æ—á–Ω–∞—è)\n"
            "üì©–≠–ª. –ø–æ—á—Ç–∞: diagnost\_chita@mail.ru"
        )
        return response, KEYBOARD

    if "–Ω–∞–∑–∞–¥" in message:
        KEYBOARD = [["üè®–ö–æ–Ω—Ç–∞–∫—Ç—ã", "üñä–ó–∞–ø–∏—Å—å –Ω–∞ –ø—Ä–∏–µ–º"], 
                ["‚è±Ô∏è–ß–∞—Å—ã —Ä–∞–±–æ—Ç—ã —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤"]]
        response = "–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"
        return response, KEYBOARD
    if "–∑–∞–ø–∏—Å—å –Ω–∞ –ø—Ä–∏–µ–º" in message:
        response = ("üòî–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –º—ã –≤—Å–µ –µ—â–µ —Ä–∞–±–æ—Ç–∞–µ–º –Ω–∞–¥ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π. –ü–æ–∫–∞ —á—Ç–æ –¥–ª—è –∑–∞–ø–∏—Å–∏ –Ω–∞ –ø—Ä–∏–µ–º –∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –≤ –∫–æ–ª–ª-—Ü–µ–Ω—Ç—Ä –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∏.\n"
                    "üìû–¢–µ–ª–µ—Ñ–æ–Ω –µ–¥–∏–Ω–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–≤–æ–Ω–∫–æ–≤ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–π –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∏: 8 (3022) 73-70-73 (–µ–¥–∏–Ω–∞—è —Å–ø—Ä–∞–≤–æ—á–Ω–∞—è)")
        KEYBOARD = [["üè®–ö–æ–Ω—Ç–∞–∫—Ç—ã", "üñä–ó–∞–ø–∏—Å—å –Ω–∞ –ø—Ä–∏–µ–º"], 
                ["‚è±Ô∏è–ß–∞—Å—ã —Ä–∞–±–æ—Ç—ã —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤"]]
        return response, KEYBOARD
    if "—á–∞—Å—ã —Ä–∞–±–æ—Ç—ã —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤" in message:
        response = ("üòî–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –º—ã –≤—Å–µ –µ—â–µ —Ä–∞–±–æ—Ç–∞–µ–º –Ω–∞–¥ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π. –ü–æ–∫–∞ —á—Ç–æ —É–∑–Ω–∞—Ç—å —á–∞—Å—ã —Ä–∞–±–æ—Ç—ã —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ –∫–æ–ª–ª-—Ü–µ–Ω—Ç—Ä –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∏.\n"
                    "üìû–¢–µ–ª–µ—Ñ–æ–Ω –µ–¥–∏–Ω–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–≤–æ–Ω–∫–æ–≤ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–π –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∏: 8 (3022) 73-70-73 (–µ–¥–∏–Ω–∞—è —Å–ø—Ä–∞–≤–æ—á–Ω–∞—è)")
        KEYBOARD = [["üè®–ö–æ–Ω—Ç–∞–∫—Ç—ã", "üñä–ó–∞–ø–∏—Å—å –Ω–∞ –ø—Ä–∏–µ–º"], 
                ["‚è±Ô∏è–ß–∞—Å—ã —Ä–∞–±–æ—Ç—ã —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤"]]
        return response, KEYBOARD


    else:
        KEYBOARD = [["üè®–ö–æ–Ω—Ç–∞–∫—Ç—ã", "üñä–ó–∞–ø–∏—Å—å –Ω–∞ –ø—Ä–∏–µ–º"], 
                   ["‚è±Ô∏è–ß–∞—Å—ã —Ä–∞–±–æ—Ç—ã —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤"]]
        
        # –ò—Å–ø–æ–ª—å–∑—É–µ–º GigaChat –≤–º–µ—Å—Ç–æ OpenAI
        ai_response = gigachat_helper.get_response(message)
        return ai_response, KEYBOARD
        
    